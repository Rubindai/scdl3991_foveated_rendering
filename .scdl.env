# ================= SCDL Pipeline Config (.scdl.env) =================
# Minimal, high-sanity defaults for the foveated pipeline.
# Values here are meant to be safe fast defaults; override only when needed.

# -------- Project / Paths --------
BLENDER_EXE=/home/rubin/Downloads/blender-4.5.4-linux-x64/blender
BLEND_FILE=blender_files/car.blend         # default scene; overridden by CLI arg


# -------- Logging / Device --------
SCDL_LOG_MODE=both                            # stdout|file|both
SCDL_CYCLES_DEVICE=OPTIX                      # hard-enforce OPTIX
SCDL_EXPECTED_GPU="RTX 3060"                  # substring match for required GPU


# -------- Preview (Step 1) --------
SCDL_PREVIEW_SHORT=448                        # short-side resolution
SCDL_PREVIEW_SPP=8                            # samples-per-pixel
SCDL_PREVIEW_MIN_SPP=4                        # adaptive min samples
SCDL_PREVIEW_ADAPTIVE_THRESHOLD=0.04
SCDL_PREVIEW_DENOISE=1                        # OPTIX denoise on
SCDL_PREVIEW_BLUR_GLOSSY=0.2
SCDL_PREVIEW_CAUSTICS=0
SCDL_PREVIEW_SEED=42                          # deterministic previews


# -------- Saliency (Step 2) --------
SCDL_DINO_LOCAL_DIR=models/dinov3-vits16      # local HF-format weights
SCDL_DINO_SIZE=336                            # DINO resize
SCDL_MASK_DEVICE=cuda:0
SCDL_PERC_LO=0.60                             # saliency stretch low percentile
SCDL_PERC_HI=0.995                            # saliency stretch high percentile
SCDL_MASK_GAMMA=2.0
SCDL_MORPH_K=3                                # morphology kernel size
SCDL_USER_IMPORTANCE_PREVIEW=1                # save preview PNG
SCDL_USER_IMPORTANCE_PREVIEW_MODE=gray
SCDL_USER_IMPORTANCE_PREVIEW_ALPHA=0.6


# -------- Final Render (Step 3) --------
SCDL_FOVEATED_BASE_SPP=192                    # base Cycles samples
SCDL_FOVEATED_MIN_SPP=32                      # clamp floor
SCDL_FOVEATED_MAX_SPP=768                     # clamp ceiling
SCDL_ADAPTIVE_THRESHOLD=0.03                  # Cycles adaptive threshold
SCDL_ADAPTIVE_MIN_SAMPLES=32                  # Cycles adaptive min samples
SCDL_FOVEATED_AUTOSPP=1                       # enable coverage-aware SPP scaling
SCDL_FOVEATED_AUTOSPP_TAPER=0.65              # lower â†’ drop SPP harder when HQ is tiny
SCDL_FOVEATED_ADAPTIVE_BOOST=1.35             # raise adaptive threshold as coverage shrinks
SCDL_FOVEATED_FILTER_GLOSSY=0.5
SCDL_FOVEATED_CAUSTICS=0
SCDL_FOVEATED_AUTO_THRESH=1                   # auto-adjust thresholds/bias from coverage
SCDL_FOVEATED_AUTO_LO_PUSH=0.25               # push low percentile up as coverage shrinks
SCDL_FOVEATED_AUTO_HI_PULL=0.15               # adjust high percentile with coverage
SCDL_FOVEATED_AUTO_MASK_BIAS_GAIN=0.12        # extra mask bias for tiny coverage
SCDL_FOVEATED_LIGHT_THRESHOLD_BOOST=2.0       # cull lights more when LQ dominates
SCDL_FOVEATED_IMPORTANCE_MID_WEIGHT=0.35      # weight mid-importance coverage when sizing SPP
SCDL_FOVEATED_MIN_FLOOR_FRACTION=0.50         # allow SPP floor to drop this far when HQ is tiny
SCDL_FOVEATED_LQ_SAMPLE_BIAS=0.85             # scales samples down harder as LQ coverage grows
SCDL_FOVEATED_LQ_MIN_SCALE=0.35               # clamp for how far the LQ bias can shrink samples
SCDL_FOVEATED_MAX_BOUNCES=8                   # base max bounces
SCDL_FOVEATED_TRANSPARENT_BOUNCES=8           # base transparent bounces
SCDL_FOVEATED_BOUNCE_FLOOR=4                  # minimum bounces when LQ dominates
SCDL_FOVEATED_BOUNCE_TAPER=0.55               # pull bounce caps toward the floor as coverage shrinks


# -------- Baseline (Full Render) --------
SCDL_BASELINE_SPP=512                         # higher baseline budget for fair quality comparisons
# SCDL_BASELINE_SPP_SCALE=1.0                 # optional multiplier for baseline SPP


# -------- Launcher / Advanced --------
SCDL_CLEAR_OUT_DIR=1                          # wipe out/ each run
